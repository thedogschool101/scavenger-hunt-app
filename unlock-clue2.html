<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDeTF1VT20rZEUz_46SqIWqcNAmFRyb-YA",
    authDomain: "doghuntapp.firebaseapp.com",
    projectId: "doghuntapp",
    storageBucket: "doghuntapp.appspot.com",
    messagingSenderId: "516842466897",
    appId: "1:516842466897:web:78d992f9fad6c9d5ad1270"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  function checkCode() {
    const entered = document.getElementById("codeInput").value.trim().toLowerCase();
    const correct = "benchtail22";

    if (entered === correct) {
      const email = localStorage.getItem("userEmail") || "unknown@anonymous.com";
      db.collection("players").where("email", "==", email).get().then(snapshot => {
        if (!snapshot.empty) {
          snapshot.docs[0].ref.update({
            clue2_unlocked: new Date()
          });
        }
        window.location.href = "clue2.html";
      }).catch(error => {
        console.error("Error accessing Firestore:", error);
        alert("Database error. Try again.");
      });
    } else {
      document.getElementById("message").innerText = "‚ùå Incorrect code. Try again.";
    }
  }
</script>

